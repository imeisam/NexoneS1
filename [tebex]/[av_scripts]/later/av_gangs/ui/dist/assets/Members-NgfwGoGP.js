import{p as Ns,u as G,b as W,j as e,B as D,d as Re,f as J,e as Ae,g as se,C as Ds,h as Os,i as Ms,k as Ts,r as w,l as Be,m as Es,n as Vs,o as $s,q as Fs,s as Ls,t as Gs,v as Te,w as Rs,x as $,O as As,y as Q,z as P,U as Bs,A as q,T as te,R as Z,G as Us,D as Ue,E as ve,F as H,H as ee,P as qs,J as Hs,L as Ks,K as Ws,M as Ee,N as Ve,Q as Js,S as Qs,V as $e}from"./index-DWxocKBz.js";var qe={root:"m_4451eb3a"};const Xs={},ge=Ns((a,n)=>{const s=G("Center",Xs,a),{classNames:t,className:o,style:d,styles:u,unstyled:i,vars:_,inline:c,mod:f,...v}=s,m=W({name:"Center",props:s,classes:qe,className:o,style:d,classNames:t,styles:u,unstyled:i,vars:_});return e.jsx(D,{ref:n,mod:[{inline:c},f],...m("root"),...v})});ge.classes=qe;ge.displayName="@mantine/core/Center";const[Ys,be]=Re(),[Zs,et]=Re();var oe={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const st={},tt=Ae((a,{gap:n},{size:s})=>({group:{"--pg-gap":n!==void 0?se(n):se(s,"pg-gap")}})),ye=J((a,n)=>{const s=G("PillGroup",st,a),{classNames:t,className:o,style:d,styles:u,unstyled:i,vars:_,size:c,disabled:f,...v}=s,m=be(),r=(m==null?void 0:m.size)||c||void 0,y=W({name:"PillGroup",classes:oe,props:s,className:o,style:d,classNames:t,styles:u,unstyled:i,vars:_,varsResolver:tt,stylesCtx:{size:r},rootSelector:"group"});return e.jsx(Zs,{value:{size:r,disabled:f},children:e.jsx(D,{ref:n,size:r,...y("group"),...v})})});ye.classes=oe;ye.displayName="@mantine/core/PillGroup";const nt={variant:"default"},ot=Ae((a,{radius:n},{size:s})=>({root:{"--pill-fz":se(s,"pill-fz"),"--pill-height":se(s,"pill-height"),"--pill-radius":n===void 0?void 0:Os(n)}})),K=J((a,n)=>{const s=G("Pill",nt,a),{classNames:t,className:o,style:d,styles:u,unstyled:i,vars:_,variant:c,children:f,withRemoveButton:v,onRemove:m,removeButtonProps:r,radius:y,size:x,disabled:j,mod:E,...I}=s,C=et(),g=be(),T=x||(C==null?void 0:C.size)||void 0,F=(g==null?void 0:g.variant)==="filled"?"contrast":c||"default",V=W({name:"Pill",classes:oe,props:s,className:o,style:d,classNames:t,styles:u,unstyled:i,vars:_,varsResolver:ot,stylesCtx:{size:T}});return e.jsxs(D,{component:"span",ref:n,variant:F,size:T,...V("root",{variant:F}),mod:[{"with-remove":v&&!j,disabled:j||(C==null?void 0:C.disabled)},E],...I,children:[e.jsx("span",{...V("label"),children:f}),v&&e.jsx(Ds,{variant:"transparent",radius:y,tabIndex:-1,"aria-hidden":!0,unstyled:i,...r,...V("remove",{className:r==null?void 0:r.className,style:r==null?void 0:r.style}),onMouseDown:z=>{var O;z.preventDefault(),z.stopPropagation(),(O=r==null?void 0:r.onMouseDown)==null||O.call(r,z)},onClick:z=>{var O;z.stopPropagation(),m==null||m(),(O=r==null?void 0:r.onClick)==null||O.call(r,z)}})]})});K.classes=oe;K.displayName="@mantine/core/Pill";K.Group=ye;var He={field:"m_45c4369d"};const at={type:"visible"},je=J((a,n)=>{const s=G("PillsInputField",at,a),{classNames:t,className:o,style:d,styles:u,unstyled:i,vars:_,type:c,disabled:f,id:v,pointer:m,mod:r,...y}=s,x=be(),j=Ms(),E=W({name:"PillsInputField",classes:He,props:s,className:o,style:d,classNames:t,styles:u,unstyled:i,rootSelector:"field"}),I=f||(x==null?void 0:x.disabled);return e.jsx(D,{component:"input",ref:Ts(n,x==null?void 0:x.fieldRef),"data-type":c,disabled:I,mod:[{disabled:I,pointer:m},r],...E("field"),...y,id:(j==null?void 0:j.inputId)||v,"aria-invalid":x==null?void 0:x.hasError,"aria-describedby":j==null?void 0:j.describedBy,type:"text",onMouseDown:C=>!m&&C.stopPropagation()})});je.classes=He;je.displayName="@mantine/core/PillsInputField";const rt={},ne=J((a,n)=>{const s=G("PillsInput",rt,a),{children:t,onMouseDown:o,onClick:d,size:u,disabled:i,__staticSelector:_,error:c,variant:f,...v}=s,m=w.useRef();return e.jsx(Ys,{value:{fieldRef:m,size:u,disabled:i,hasError:!!c,variant:f},children:e.jsx(Be,{size:u,error:c,variant:f,component:"div",ref:n,onMouseDown:r=>{var y;r.preventDefault(),o==null||o(r),(y=m.current)==null||y.focus()},onClick:r=>{var y;r.preventDefault(),d==null||d(r),(y=m.current)==null||y.focus()},...v,multiline:!0,disabled:i,__staticSelector:_||"PillsInput",withAria:!1,children:t})})});ne.displayName="@mantine/core/PillsInput";ne.Field=je;function lt({data:a,value:n}){const s=n.map(o=>o.trim().toLowerCase());return a.reduce((o,d)=>(Es(d)?o.push({group:d.group,items:d.items.filter(u=>s.indexOf(u.value.toLowerCase().trim())===-1)}):s.indexOf(d.value.toLowerCase().trim())===-1&&o.push(d),o),[])}const it={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Se=J((a,n)=>{const s=G("MultiSelect",it,a),{classNames:t,className:o,style:d,styles:u,unstyled:i,vars:_,size:c,value:f,defaultValue:v,onChange:m,onKeyDown:r,variant:y,data:x,dropdownOpened:j,defaultDropdownOpened:E,onDropdownOpen:I,onDropdownClose:C,selectFirstOptionOnChange:g,onOptionSubmit:T,comboboxProps:F,filter:V,limit:z,withScrollArea:O,maxDropdownHeight:ae,searchValue:R,defaultSearchValue:re,onSearchChange:l,readOnly:p,disabled:S,onFocus:A,onBlur:le,onPaste:It,radius:Ke,rightSection:We,rightSectionWidth:Je,rightSectionPointerEvents:_e,rightSectionProps:Qe,leftSection:Xe,leftSectionWidth:Ye,leftSectionPointerEvents:Ze,leftSectionProps:es,inputContainer:ss,inputWrapperOrder:ts,withAsterisk:ns,labelProps:os,descriptionProps:as,errorProps:rs,wrapperProps:ls,description:is,label:ie,error:Ce,maxValues:cs,searchable:N,nothingFoundMessage:we,withCheckIcon:ds,checkIconPosition:us,hidePickedOptions:Pe,withErrorStyles:ps,name:hs,form:ms,id:fs,clearable:xs,clearButtonProps:vs,hiddenInputProps:gs,placeholder:ke,hiddenInputValuesDivider:bs,required:ys,mod:js,renderOption:Ss,onRemove:M,onClear:ce,scrollAreaProps:_s,...Ie}=s,de=Vs(fs),ue=$s(x),L=Fs(ue),k=Ls({opened:j,defaultOpened:E,onDropdownOpen:I,onDropdownClose:()=>{C==null||C(),k.resetSelectedOption()}}),{styleProps:Cs,rest:{type:zt,autoComplete:ws,...Ps}}=Gs(Ie),[b,B]=Te({value:f,defaultValue:v,finalValue:[],onChange:m}),[X,Y]=Te({value:R,defaultValue:re,finalValue:"",onChange:l}),pe=W({name:"MultiSelect",classes:{},props:s,classNames:t,styles:u,unstyled:i}),{resolvedClassNames:ze,resolvedStyles:Ne}=Rs({props:s,styles:u,classNames:t}),ks=h=>{r==null||r(h),h.key===" "&&!N&&(h.preventDefault(),k.toggleDropdown()),h.key==="Backspace"&&X.length===0&&b.length>0&&(M==null||M(b[b.length-1]),B(b.slice(0,b.length-1)))},Is=b.map((h,me)=>{var Oe,Me;return e.jsx(K,{withRemoveButton:!p&&!((Oe=L[h])!=null&&Oe.disabled),onRemove:()=>{B(b.filter(zs=>h!==zs)),M==null||M(h)},unstyled:i,disabled:S,...pe("pill"),children:((Me=L[h])==null?void 0:Me.label)||h},`${h}-${me}`)});w.useEffect(()=>{g&&k.selectFirstOption()},[g,b]);const he=xs&&b.length>0&&!S&&!p&&e.jsx($.ClearButton,{size:c,...vs,onClear:()=>{ce==null||ce(),B([]),Y("")}}),De=lt({data:ue,value:b});return e.jsxs(e.Fragment,{children:[e.jsxs($,{store:k,classNames:ze,styles:Ne,unstyled:i,size:c,readOnly:p,__staticSelector:"MultiSelect",onOptionSubmit:h=>{T==null||T(h),Y(""),k.updateSelectedOptionIndex("selected"),b.includes(L[h].value)?(B(b.filter(me=>me!==L[h].value)),M==null||M(L[h].value)):b.length<cs&&B([...b,L[h].value])},...F,children:[e.jsx($.DropdownTarget,{children:e.jsx(ne,{...Cs,__staticSelector:"MultiSelect",classNames:ze,styles:Ne,unstyled:i,size:c,className:o,style:d,variant:y,disabled:S,radius:Ke,rightSection:We||he||e.jsx($.Chevron,{size:c,error:Ce,unstyled:i}),rightSectionPointerEvents:_e||(he?"all":"none"),rightSectionWidth:Je,rightSectionProps:Qe,leftSection:Xe,leftSectionWidth:Ye,leftSectionPointerEvents:Ze,leftSectionProps:es,inputContainer:ss,inputWrapperOrder:ts,withAsterisk:ns,labelProps:os,descriptionProps:as,errorProps:rs,wrapperProps:ls,description:is,label:ie,error:Ce,multiline:!0,withErrorStyles:ps,__stylesApiProps:{...s,rightSectionPointerEvents:_e||(he?"all":"none"),multiline:!0},pointer:!N,onClick:()=>N?k.openDropdown():k.toggleDropdown(),"data-expanded":k.dropdownOpened||void 0,id:de,required:ys,mod:js,children:e.jsxs(K.Group,{disabled:S,unstyled:i,...pe("pillsList"),children:[Is,e.jsx($.EventsTarget,{autoComplete:ws,children:e.jsx(ne.Field,{...Ps,ref:n,id:de,placeholder:ke,type:!N&&!ke?"hidden":"visible",...pe("inputField"),unstyled:i,onFocus:h=>{A==null||A(h),N&&k.openDropdown()},onBlur:h=>{le==null||le(h),k.closeDropdown(),Y("")},onKeyDown:ks,value:X,onChange:h=>{Y(h.currentTarget.value),N&&k.openDropdown(),g&&k.selectFirstOption()},disabled:S,readOnly:p||!N,pointer:!N})})]})})}),e.jsx(As,{data:Pe?De:ue,hidden:p||S,filter:V,search:X,limit:z,hiddenWhenEmpty:!N||!we||Pe&&De.length===0&&X.trim().length===0,withScrollArea:O,maxDropdownHeight:ae,filterOptions:N,value:b,checkIconPosition:us,withCheckIcon:ds,nothingFoundMessage:we,unstyled:i,labelId:ie?`${de}-label`:void 0,"aria-label":ie?void 0:Ie["aria-label"],renderOption:Ss,scrollAreaProps:_s})]}),e.jsx($.HiddenInput,{name:hs,valuesDivider:bs,value:b,form:ms,disabled:S,...gs})]})});Se.classes={...Be.classes,...$.classes};Se.displayName="@mantine/core/MultiSelect";/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ct=Q("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dt=Q("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut=Q("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pt=Q("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ht=Q("outline","selector","IconSelector",[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]]);const mt="_th_11jzb_1",ft="_control_11jzb_9",xt="_icon_11jzb_19",vt="_option_11jzb_31",gt="_input_11jzb_39",bt="_members_11jzb_47",U={th:mt,control:ft,icon:xt,option:vt,input:gt,members:bt},fe=({children:a,reversed:n,sorted:s,onSort:t})=>{const o=s?n?dt:ct:ht;return e.jsx(P.Th,{className:U.th,children:e.jsx(Bs,{onClick:t,className:U.control,children:e.jsxs(q,{justify:"space-between",children:[e.jsx(te,{fw:500,fz:"sm",children:a}),e.jsx(ge,{className:U.icon,children:e.jsx(o,{style:{width:"16px",height:"16px"},stroke:1.5})})]})})})},yt=({sortBy:a,reverseSortDirection:n,setSorting:s,rows:t,lang:o})=>e.jsxs(P,{horizontalSpacing:"md",verticalSpacing:"xs",layout:"fixed",children:[e.jsx(P.Tbody,{children:e.jsxs(P.Tr,{children:[e.jsx(P.Th,{w:60}),e.jsx(fe,{sorted:a==="name",reversed:n,onSort:()=>s("name"),children:o.members.name}),e.jsx(fe,{sorted:a==="rank",reversed:n,onSort:()=>s("rank"),children:o.members.rank}),e.jsx(fe,{sorted:a==="joined",reversed:n,onSort:()=>s("joined"),children:o.members.joined}),e.jsx(P.Th,{children:o.actions})]})}),e.jsx(P.Tbody,{children:t.length>0?t:null})]});function Fe(a,n){const s=n.toLowerCase().trim();return a.filter(t=>Object.keys(t).some(o=>t[o].toString().toLowerCase().includes(s)))}function Le(a,n){const{sortBy:s,reversed:t}=n;return Fe(s?[...a].sort((o,d)=>{let u=o[s],i=d[s];return typeof u=="number"&&typeof i=="number"?t?i-u:u-i:t?i.toString().localeCompare(u.toString()):u.toString().localeCompare(i.toString())}):a,n.search)}const jt="_container_98xa0_1",St="_box_98xa0_21",_t="_photo_98xa0_47",xe={container:jt,box:St,photo:_t},Ct=({member:a,show:n,lang:s})=>{const[t,o]=w.useState(a),d=Z(Us),u=d.permissions.filter(c=>a.permissions.includes(c.value)).map(c=>c.value),i=(c,f)=>{const v={...t,[c]:f};o(v)},_=()=>{ee("av_gangs","updateMember",t),n(!1)};return e.jsx(D,{className:xe.container,children:e.jsxs(D,{className:xe.box,children:[e.jsx(te,{fz:"lg",fw:500,ta:"center",children:t==null?void 0:t.playerName}),e.jsx(Ue,{src:t==null?void 0:t.photo,className:xe.photo,w:85,h:85}),e.jsx(ve,{label:s.members.photo,value:t==null?void 0:t.photo,size:"xs",onChange:c=>{i("photo",c.target.value)}}),e.jsx(ve,{label:s.members.rank,value:t==null?void 0:t.rank,size:"xs",mt:"sm",onChange:c=>{i("rank",c.target.value)}}),e.jsx(Se,{label:s.members.permissions,data:d.permissions,defaultValue:u,size:"xs",mt:"sm",onChange:c=>{i("permissions",c)}}),e.jsxs(q,{mt:"md",grow:!0,children:[e.jsx(H,{size:"xs",color:"red",variant:"light",onClick:()=>{n(!1)},children:s.cancel}),e.jsx(H,{size:"xs",color:"teal",variant:"light",onClick:_,children:s.save})]})]})})},wt="_container_ca1o1_1",Pt="_box_ca1o1_23",Ge={container:wt,box:Pt},kt=({member:a,deleteMember:n,showConfirm:s,lang:t})=>{const o=()=>{n(a.identifier),s(!1)};return e.jsx(D,{className:Ge.container,children:e.jsxs(D,{className:Ge.box,children:[e.jsx(te,{fw:500,fz:"md",c:"gray.3",ta:"center",children:t.removeMember}),e.jsx(te,{fz:"sm",c:"gray.6",mt:"sm",children:`${t.members.removeConfirmation} ${a.playerName}?`}),e.jsxs(q,{grow:!0,mt:"md",children:[e.jsx(H,{variant:"subtle",color:"teal",onClick:o,children:t.confirm}),e.jsx(H,{variant:"light",color:"red",onClick:()=>{s(!1)},children:t.cancel})]})]})})},Dt=()=>{const a=Z(qs),n=Z(Hs),[s,t]=w.useState(!1),[o,d]=w.useState(!1),[u,i]=w.useState(!1),[_,c]=w.useState({}),[f,v]=w.useState([]),[m,r]=w.useState(""),[y,x]=w.useState(f),[j,E]=w.useState(null),[I,C]=w.useState(!1),g=Z(Ks);Ws("updateMember",l=>{const p=f.map(S=>S.identifier===l.identifier?l:S);c([]),v(p),x(p)});const T=l=>{const p=l===j?!I:!1;C(p),E(l),x(Le(f,{sortBy:l,reversed:p,search:m}))},F=l=>{const{value:p}=l.currentTarget;r(p),x(Le(f,{sortBy:j,reversed:I,search:p}))},V=l=>{c(l),i(!0)},z=l=>{d(!0),c(l)},O=async l=>{if(!await ee("av_gangs","deleteMember",l))return;const S=f.filter(A=>A.identifier!==l);c([]),v(S),x(S)},ae=async()=>{const l=await ee("av_gangs","invite");l&&(v(l),x(l))},R=(l,p)=>p.some(S=>l.includes(S)),re=y.map((l,p)=>e.jsxs(P.Tr,{fz:"xs",children:[e.jsx(P.Td,{children:e.jsx(Ue,{src:l.photo,size:30})}),e.jsx(P.Td,{children:l.playerName}),e.jsx(P.Td,{children:l.rank}),e.jsx(P.Td,{children:l.joined}),e.jsx(P.Td,{children:e.jsxs(q,{gap:"sm",children:[R(a,["isBoss","members"])&&e.jsx(Ee,{color:"dark.4",label:g.members.editMember,children:e.jsx(Ve,{size:"sm",variant:"subtle",color:"cyan.4",onClick:()=>{V(l)},children:e.jsx(ut,{style:{width:"70%",height:"70%"}})})}),R(a,["isBoss","members"])||n==l.identifier?e.jsx(Ee,{color:"dark.4",label:n==l.identifier?g.members.leave:g.members.remove,children:e.jsx(Ve,{size:"sm",variant:"subtle",color:"red.4",onClick:()=>{z(l)},children:e.jsx(Js,{style:{width:"70%",height:"70%"}})})}):null]})})]},l.playerName+p));return w.useEffect(()=>{(async()=>{const p=await ee("av_gangs","getMembers");p&&(v(p),x(p)),setTimeout(()=>{t(!0)},100)})()},[]),e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[u&&e.jsx(Ct,{member:_,show:i,lang:g}),o&&e.jsx(kt,{member:_,deleteMember:O,showConfirm:d,lang:g}),e.jsxs(q,{gap:"sm",mb:"md",preventGrowOverflow:!1,grow:!0,children:[e.jsx(ve,{placeholder:g.search,leftSection:e.jsx(pt,{style:{width:$e(16),height:$e(16)},stroke:1.5}),value:m,onChange:F,classNames:U,opacity:u||o?0:1}),R(a,["isBoss","members"])&&e.jsx(H,{color:"teal",maw:"15%",opacity:u||o?0:1,onClick:ae,children:g.members.invite})]}),e.jsx(D,{className:U.members,children:e.jsx(yt,{sortBy:j,reverseSortDirection:I,setSorting:T,rows:re,lang:g})})]}):e.jsx(D,{style:{display:"flex",alignContent:"center",alignItems:"center",height:"100%"},children:e.jsx(Qs,{visible:!0,zIndex:1e3,loaderProps:{color:"teal",type:"dots"},overlayProps:{radius:"sm",blur:2,opacity:0}})})})};export{Dt as default};
