import{p as ue,u as he,a as me,j as s,B as W,d as P,J as i,U as pe,G as M,T as v,r as w,z as k,L as J,C as xe,w as D,M as K,E as ye,D as ge,F as ve,R as fe,Z as je,P as be,e as b,H as Se,K as H,N as Y,O as S,Q as _e,S as Ce,V as Ie,W as Te,_ as ke,$ as ze,X as Ne,y as _}from"./index-iDUw9Hoi.js";import{u as Z,c as R,T as De}from"./capitalizeText-yZk75E9J.js";var ee={root:"m_4451eb3a"};const Me={},O=ue((n,a)=>{const t=he("Center",Me,n),{classNames:o,className:d,style:p,styles:f,unstyled:j,vars:l,inline:c,mod:u,...L}=t,z=me({name:"Center",props:t,classes:ee,className:d,style:p,classNames:o,styles:f,unstyled:j,vars:l});return s.jsx(W,{ref:a,mod:[{inline:c},u],...z("root"),...L})});O.classes=ee;O.displayName="@mantine/core/Center";/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pe=P("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=P("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=P("outline","playlist-x","IconPlaylistX",[["path",{d:"M19 8h-14",key:"svg-0"}],["path",{d:"M5 12h7",key:"svg-1"}],["path",{d:"M12 16h-7",key:"svg-2"}],["path",{d:"M16 14l4 4",key:"svg-3"}],["path",{d:"M20 14l-4 4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ae=P("outline","selector","IconSelector",[["path",{d:"M8 9l4 -4l4 4",key:"svg-0"}],["path",{d:"M16 15l-4 4l-4 -4",key:"svg-1"}]]);const Be="_input_crn5l_1",Re="_heart_crn5l_19",$e="_pulse_crn5l_1",Ve="_scroll_crn5l_59",C={input:Be,heart:Re,pulse:$e,scroll:Ve},$=({children:n,reversed:a,sorted:t,onSort:o})=>{const d=t?a?Le:Pe:Ae;return s.jsx(i.Th,{className:C.th,children:s.jsx(pe,{onClick:o,className:C.control,children:s.jsxs(M,{justify:"space-between",children:[s.jsx(v,{fw:500,fz:"xs",children:n}),s.jsx(O,{className:C.icon,children:s.jsx(d,{style:{width:w(16),height:w(16)},stroke:1.5})})]})})})};function G(n,a){const t=a.toLowerCase().trim();return n.filter(o=>Object.keys(o).some(d=>{const p=o[d];return typeof p=="string"?p.toLowerCase().includes(t):!1}))}function Q(n,a){const{sortBy:t,reversed:o,search:d}=a;return t?[...G(n,d)].sort((f,j)=>{const l=f[t],c=j[t];return typeof l=="object"&&l!==null&&"name"in l&&typeof c=="object"&&c!==null&&"name"in c?o?c.name.localeCompare(l.name):l.name.localeCompare(c.name):typeof l=="string"&&typeof c=="string"?o?c.localeCompare(l):l.localeCompare(c):typeof l=="number"&&typeof c=="number"?o?c-l:l-c:0}):G(n,d)}const He=()=>{const n=k(J),a=k(xe),[t,o]=D(K),d=k(ye),[p,f]=D(ge),[j,l]=D(ve),c=fe(je),[u,L]=D(be),[z,se]=b.useState(""),[te,N]=b.useState(t.songs),[I,ne]=b.useState(null),[T,ae]=b.useState(!1),[q,E]=b.useState({url:"",class:"heart"}),F=Z();function re(e){return!!p[e]}const U=async(e,r)=>{const x=await _("av_music","toggleLike",{song:r,action:e});if(e==="remove"){const{[r.videoId]:h,...m}=p;if(f(m),a.type==="favorites"){const y=t.songs.filter(g=>g.videoId!==r.videoId);o(g=>({...g,songs:y}))}return}if(f({...p,[r.videoId]:r}),E({url:r.videoId,class:C.heart}),setTimeout(()=>{E({url:"",class:"heart"})},1e3),x&&a.type=="favorites"){const h={...t,songs:[...t.songs,x]};o(h)}},A=async e=>{var h,m;const r={...e,volume:u.volume},x=await _("av_music","play",{song:r,playlist:t.songs});if(x){l({...e,artist:e.artist.name,thumbnail:((h=e.thumbnails[1])==null?void 0:h.url)||e.thumbnails[0].url,name:e.name,url:e.videoId,liked:!1}),c(((m=e.thumbnails[1])==null?void 0:m.url)||e.thumbnails[0].url);const y={...u,playing:!0,duration:x};L(y),setTimeout(()=>{_("av_music","loaded")},500)}},B=e=>{const r=e===I?!T:!1;ae(r),ne(e),N(Q(t.songs,{sortBy:e,reversed:r,search:z}))},le=e=>{const{value:r}=e.currentTarget;se(r),N(Q(t.songs,{sortBy:I,reversed:T,search:r}))},ce=async(e,r)=>{if(await _("av_music","removeFromPlaylist",{videoId:e,identifier:r})){const h={...t.songs},m=Object.values(h).filter(y=>y.videoId!==e);o({...t,songs:m}),N(m)}},ie=(e,r)=>{_("av_music","addToPlaylist",{identifier:e,song:r})},oe=te.map(e=>({...e,artist:{...e.artist,name:R(e.artist.name)},name:R(e.name),album:e.album?{...e.album,name:R(e.album.name)}:void 0,seconds:Se(e.duration)})),de=e=>{_("av_music","addToDevice",e)},X=oe.map((e,r)=>{var x,h,m,y;return s.jsxs(i.Tr,{children:[s.jsx(i.Td,{c:"gray.5",fz:"xs",w:20,children:e.videoId==j.url&&u.playing?s.jsx(H,{src:"./equaliser.gif",w:15}):`${r+1}`}),s.jsx(i.Td,{children:s.jsxs(M,{onClick:()=>{A(e)},children:[F>700&&s.jsx(H,{w:40,src:((x=e.thumbnails[1])==null?void 0:x.url)||e.thumbnails[0].url}),s.jsxs(Y,{direction:"column",gap:1,maw:"70%",children:[s.jsx(v,{c:e.videoId==j.url?"red.5":"white",fz:"sm",truncate:!0,children:e!=null&&e.name?e.name:"N/A"}),s.jsx(v,{c:"gray.5",fz:"xs",truncate:!0,children:(h=e==null?void 0:e.artist)!=null&&h.name?(m=e==null?void 0:e.artist)==null?void 0:m.name:"N/A"})]})]})}),F>700&&s.jsx(i.Td,{onClick:()=>{A(e)},children:(y=e==null?void 0:e.album)!=null&&y.name?e.album.name:"N/A"}),s.jsx(i.Td,{onClick:()=>{A(e)},children:e.seconds}),s.jsx(i.Td,{w:95,children:s.jsxs(M,{children:[s.jsxs(S,{disabled:a.type=="playlist"&&!u.headphones,children:[s.jsx(S.Target,{children:s.jsx(De,{label:a.type=="playlist"&&!u.headphones?n.remove_song:n.add_to,fz:"xs",color:"dark.3",children:s.jsx(_e,{variant:"transparent",size:"xs",color:"white",onDoubleClick:()=>{a.type==="playlist"&&ce(e.videoId,a.identifier)},children:a.type=="playlist"?s.jsx(Fe,{}):s.jsx(Ce,{})})})}),s.jsxs(S.Dropdown,{miw:100,children:[u.headphones&&s.jsx(S.Item,{fz:"xs",c:"green",onClick:()=>{de(e)},children:n.add_queue}),d.length>0&&a.type!=="playlist"?s.jsx(s.Fragment,{children:d.map(g=>s.jsx(S.Item,{fz:"xs",onClick:()=>{g.identifier&&ie(g.identifier,e)},children:g.name},g.identifier))}):s.jsx(s.Fragment,{children:!u.headphones&&s.jsx(S.Label,{children:n.create_playlist})})]})]}),s.jsx(s.Fragment,{children:re(e.videoId)?s.jsx(Ie,{className:q.url==e.videoId?q.class:"",style:{color:"#f03e3e",width:"20px",height:"20px",cursor:"pointer"},onClick:()=>{U("remove",e)}}):s.jsx(Te,{style:{width:"20px",height:"20px",cursor:"pointer"},onClick:()=>{U("add",e)},stroke:1})})]})})]},e.videoId)});return b.useEffect(()=>{N(t.songs)},[t||u]),s.jsxs(s.Fragment,{children:[s.jsx(ke,{classNames:C,placeholder:n.search_in,leftSection:s.jsx(ze,{size:"0.9rem"}),value:z,onChange:le,mb:"md",ml:"auto",mr:"sm",w:"30vw",maw:255,size:"xs"}),s.jsx(Ne,{className:C.scroll,mt:"sm",type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,children:s.jsxs(i,{horizontalSpacing:"md",verticalSpacing:"xs",layout:"fixed",highlightOnHover:!0,children:[s.jsx(i.Thead,{children:s.jsxs(i.Tr,{children:[s.jsx(i.Th,{w:20,children:"#"}),s.jsx($,{sorted:I==="artist",reversed:T,onSort:()=>B("artist"),children:n.artist}),F>700&&s.jsx($,{sorted:I==="album",reversed:T,onSort:()=>B("album"),children:n.album}),s.jsx($,{sorted:I==="duration",reversed:T,onSort:()=>B("duration"),children:n.duration}),s.jsx(i.Th,{w:95})]})}),s.jsx(i.Tbody,{children:X.length>0?X:s.jsx(i.Tr,{children:s.jsx(i.Td,{colSpan:4,children:s.jsx(v,{fw:500,ta:"center",c:"dimmed",children:n.empty})})})})]})})]})},Oe="_container_1whau_1",qe="_header_1whau_11",Ee="_image_1whau_21",V={container:Oe,header:qe,image:Ee},we=()=>{const n=k(J),a=k(K),t=Z();return s.jsxs(W,{className:V.container,p:"xl",pt:4,children:[s.jsxs(M,{className:V.header,children:[s.jsx(H,{className:V.image,fallbackSrc:"https://r2.fivemanage.com/QmVAYSlqeAlD4IxVbdvu5/av_music.png",src:a.cover,h:135,w:135,radius:3}),s.jsxs(Y,{direction:"column",style:{justifyContent:"flex-end",height:"100%",width:"80%"},maw:t>70?"45vw":"30vw",children:[s.jsx(v,{fz:"sm",c:"gray.5",children:n.playlist}),s.jsx(v,{c:"white",fz:"2.55rem",tt:"capitalize",truncate:!0,fw:500,style:{maxWidth:"80%",textOverflow:"ellipsis",overflow:"hidden"},children:a.name}),s.jsx(v,{fz:"md",c:"gray.5",children:`${a.description} - ${a.songs.length} ${n.songs}`})]})]}),s.jsx(He,{})]})};export{we as default};
