import{r as A,u as ie,a5 as re,a6 as ce,f as z,b as P,a7 as le,a8 as de,j as e,B as S,a9 as ue,d as Z,g as B,U as he,aa as pe,x as me,k as ve,c as fe,ab as q,C as ge,D as xe,M as T,R as J,N as ye,P as be,X as we,S as M,a3 as je,V as D,Q as G,_ as Ce,$ as _e,W as k}from"./index-if9IWpdg.js";import{I as Ie}from"./Input-Z2ohsxQe.js";import"./NumberInput-sQuq_fXR.js";function Ae(t){if(!t||typeof t=="string")return 0;const o=t/36;return Math.round((4+15*o**.25+o/5)*10)}function E(t){return t!=null&&t.current?t.current.scrollHeight:"auto"}const N=typeof window<"u"&&window.requestAnimationFrame;function Se({transitionDuration:t,transitionTimingFunction:o="ease",onTransitionEnd:s=()=>{},opened:u}){const m=A.useRef(null),i=0,g={display:"none",height:0,overflow:"hidden"},[d,f]=A.useState(u?{}:g),h=l=>{ce.flushSync(()=>f(l))},r=l=>{h(p=>({...p,...l}))};function x(l){const p=t||Ae(l);return{transition:`height ${p}ms ${o}, opacity ${p}ms ${o}`}}ie(()=>{typeof N=="function"&&N(u?()=>{r({willChange:"height",display:"block",overflow:"hidden"}),N(()=>{const l=E(m);r({...x(l),height:l})})}:()=>{const l=E(m);r({...x(l),willChange:"height",height:l}),N(()=>r({height:i,overflow:"hidden"}))})},[u]);const w=l=>{if(!(l.target!==m.current||l.propertyName!=="height"))if(u){const p=E(m);p===d.height?h({}):r({height:p}),s()}else d.height===i&&(h(g),s())};function y({style:l={},refKey:p="ref",...a}={}){const j=a[p];return{"aria-hidden":!u,...a,[p]:re(m,j),onTransitionEnd:w,style:{boxSizing:"border-box",...l,...d}}}return y}const Me={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},V=z((t,o)=>{const{children:s,in:u,transitionDuration:m,transitionTimingFunction:i,style:g,onTransitionEnd:d,animateOpacity:f,...h}=P("Collapse",Me,t),r=le(),x=de(),y=(r.respectReducedMotion?x:!1)?0:m,l=Se({opened:u,transitionDuration:y,transitionTimingFunction:i,onTransitionEnd:d});return y===0?u?e.jsx(S,{...h,children:s}):null:e.jsx(S,{...l({style:{opacity:u||!f?1:0,transition:f?`opacity ${y}ms ${i}`:"none",...ue(g,r)},ref:o,...h}),children:s})});V.displayName="@mantine/core/Collapse";const[ke,H]=Z("Accordion component was not found in the tree");function F({style:t,size:o=16,...s}){return e.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:B(o),height:B(o),display:"block"},...s,children:e.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}F.displayName="@mantine/core/AccordionChevron";const[Ne,Y]=Z("Accordion.Item component was not found in the tree");var R={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Pe={},O=z((t,o)=>{const{classNames:s,className:u,style:m,styles:i,vars:g,chevron:d,icon:f,onClick:h,onKeyDown:r,children:x,disabled:w,mod:y,...l}=P("AccordionControl",Pe,t),{value:p}=Y(),a=H(),j=a.isItemActive(p),$=typeof a.order=="number",n=`h${a.order}`,c=e.jsxs(he,{...l,...a.getStyles("control",{className:u,classNames:s,style:m,styles:i,variant:a.variant}),unstyled:a.unstyled,mod:["accordion-control",{active:j,"chevron-position":a.chevronPosition,disabled:w},y],ref:o,onClick:v=>{h==null||h(v),a.onChange(p)},type:"button",disabled:w,"aria-expanded":j,"aria-controls":a.getRegionId(p),id:a.getControlId(p),onKeyDown:pe({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:a.loop,orientation:"vertical",onKeyDown:r}),children:[e.jsx(S,{component:"span",mod:{rotate:!a.disableChevronRotation&&j,position:a.chevronPosition},...a.getStyles("chevron",{classNames:s,styles:i}),children:d||a.chevron}),e.jsx("span",{...a.getStyles("label",{classNames:s,styles:i}),children:x}),f&&e.jsx(S,{component:"span",mod:{"chevron-position":a.chevronPosition},...a.getStyles("icon",{classNames:s,styles:i}),children:f})]});return $?e.jsx(n,{...a.getStyles("itemTitle",{classNames:s,styles:i}),children:c}):c});O.displayName="@mantine/core/AccordionControl";O.classes=R;const Re={},W=z((t,o)=>{const{classNames:s,className:u,style:m,styles:i,vars:g,value:d,mod:f,...h}=P("AccordionItem",Re,t),r=H();return e.jsx(Ne,{value:{value:d},children:e.jsx(S,{ref:o,mod:[{active:r.isItemActive(d)},f],...r.getStyles("item",{className:u,classNames:s,styles:i,style:m,variant:r.variant}),...h})})});W.displayName="@mantine/core/AccordionItem";W.classes=R;const $e={},X=z((t,o)=>{const{classNames:s,className:u,style:m,styles:i,vars:g,children:d,...f}=P("AccordionPanel",$e,t),{value:h}=Y(),r=H();return e.jsx(V,{ref:o,...r.getStyles("panel",{className:u,classNames:s,style:m,styles:i}),...f,in:r.isItemActive(h),transitionDuration:r.transitionDuration??200,role:"region",id:r.getRegionId(h),"aria-labelledby":r.getControlId(h),children:e.jsx("div",{...r.getStyles("content",{classNames:s,styles:i}),children:d})})});X.displayName="@mantine/core/AccordionPanel";X.classes=R;const De={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:e.jsx(F,{})},Ge=ge((t,{transitionDuration:o,chevronSize:s,radius:u})=>({root:{"--accordion-transition-duration":o===void 0?void 0:`${o}ms`,"--accordion-chevron-size":s===void 0?void 0:B(s),"--accordion-radius":u===void 0?void 0:xe(u)}}));function b(t){const o=P("Accordion",De,t),{classNames:s,className:u,style:m,styles:i,unstyled:g,vars:d,children:f,multiple:h,value:r,defaultValue:x,onChange:w,id:y,loop:l,transitionDuration:p,disableChevronRotation:a,chevronPosition:j,chevronSize:$,order:n,chevron:c,variant:v,radius:C,...ee}=o,L=me(y),[_,te]=ve({value:r,defaultValue:x,finalValue:h?[]:null,onChange:w}),ne=I=>Array.isArray(_)?_.includes(I):I===_,oe=I=>{const se=Array.isArray(_)?_.includes(I)?_.filter(ae=>ae!==I):[..._,I]:I===_?null:I;te(se)},K=fe({name:"Accordion",classes:R,props:o,className:u,style:m,classNames:s,styles:i,unstyled:g,vars:d,varsResolver:Ge});return e.jsx(ke,{value:{isItemActive:ne,onChange:oe,getControlId:q(`${L}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:q(`${L}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:p,disableChevronRotation:a,chevronPosition:j,order:n,chevron:c,loop:l,getStyles:K,variant:v,unstyled:g},children:e.jsx(S,{...K("root"),id:L,...ee,variant:v,"data-accordion":!0,children:f})})}const ze=t=>t;b.extend=ze;b.classes=R;b.displayName="@mantine/core/Accordion";b.Item=W;b.Panel=X;b.Control=O;b.Chevron=F;/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Te=T("outline","bubble","IconBubble",[["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=T("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=T("outline","users-group","IconUsersGroup",[["path",{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1",key:"svg-1"}],["path",{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}],["path",{d:"M17 10h2a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-4"}],["path",{d:"M3 13v-1a2 2 0 0 1 2 -2h2",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue=T("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const Be="_input_nxhsz_1",He="_item_nxhsz_9",Fe="_control_nxhsz_25",Oe="_container_nxhsz_41",U={input:Be,item:He,control:Fe,container:Oe},Q=(t,o)=>{for(const s of o.members)if(s.identifier===t)return!0;return!1},qe=()=>{const t=J(ye),o=J(be),[s,u]=A.useState(!1),[m,i]=A.useState([]),[g,d]=A.useState([]),[f,h]=A.useState({title:"",event:"",extraData:void 0,fields:[]}),[r,x]=A.useState(!1);we("updateGroups",n=>{i(n),d(n)});const w=async n=>{if(n.owner===o.identifier){const c=await k("av_boosting","deleteGroup",{identifier:n.identifier});c&&(i(c),d(c))}},y=async n=>{const c=await k("av_boosting","leaveGroup",{group:n.identifier});c&&(i(c),d(c))},l=n=>{const c=n.trim().toLowerCase();if(c.length===0){d(m);return}const v=m.filter(C=>C.label.toLowerCase().includes(c));d(v)},p=()=>{h({title:t.groups.create_header,fields:[{name:"groupName",type:"text",label:t.groups.group_name},{name:"password",type:"password",label:t.groups.group_password}],event:"createGroup",extraData:o.name}),x(!0)},a=n=>{h({title:t.groups.join_group,fields:[{name:"password",type:"password",label:t.groups.group_password}],event:"joinGroup",extraData:{group:n.identifier,name:o.name}}),x(!0)},j=async(n,c,v)=>{const C=await k("av_boosting",c,{data:n,extraData:v});C&&(i(C),d(C))},$=async(n,c)=>{const v=await k("av_boosting","removeMember",{group:n,identifier:c});v&&(i(v),d(v))};return A.useEffect(()=>{(async()=>{const c=await k("av_boosting","getGroups");c&&(i(c),d(c)),setTimeout(()=>{u(!0)},100)})()},[]),e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[r&&e.jsx(Ie,{options:f,callback:j,show:x}),e.jsxs(M,{gap:"sm",mt:"sm",p:"xs",children:[e.jsx(je,{placeholder:t.groups.search,size:"sm",w:"20%",classNames:U,onChange:n=>{l(n.target.value)}}),e.jsx(D,{size:"sm",variant:"light",color:"cyan",onClick:p,children:t.groups.create_button})]}),e.jsx(S,{p:"xs",className:U.container,children:g[0]&&e.jsx(b,{classNames:U,children:g.map((n,c)=>e.jsxs(b.Item,{value:n.identifier,mb:g.length>c+1?"xs":0,children:[e.jsx(b.Control,{children:e.jsxs(M,{grow:!0,children:[e.jsx(G,{fz:"sm",fw:500,children:n.label}),e.jsxs(M,{gap:"xs",children:[e.jsx(Te,{style:{width:"15px",height:"15px"},stroke:1.5}),e.jsx(G,{size:"xs",fw:500,children:n.status})]}),e.jsxs(M,{gap:"xs",children:[e.jsx(Ee,{style:{width:"15px",height:"15px"},stroke:1.5}),e.jsx(G,{size:"xs",fw:500,children:`${n.members.length}/${n.maxMembers}`})]})]})}),e.jsx(b.Panel,{children:e.jsxs(M,{p:"xs",children:[e.jsx(M,{gap:"md",children:n.members.map((v,C)=>e.jsxs(S,{display:"flex",children:[e.jsx(Le,{style:{width:"15px",height:"15px"}}),e.jsx(G,{fz:"xs",ml:3,children:Q(o.identifier,n)?v.name:`Anon ${C+1}`}),o.identifier==n.owner&&o.identifier!==v.identifier?e.jsx(Ce,{size:"xs",variant:"transparent",color:"red.5",onClick:()=>{$(n,v.identifier)},children:e.jsx(Ue,{style:{height:"10px",width:"10px"},stroke:1.5})}):null]}))}),e.jsx(M,{ml:"auto",children:Q(o.identifier,n)?e.jsxs(e.Fragment,{children:[e.jsx(D,{size:"xs",color:"yellow.3",variant:"light",onClick:()=>{y(n)},children:t.groups.leave_button}),n.owner==o.identifier&&e.jsx(D,{size:"xs",color:"red",variant:"subtle",onClick:()=>{w(n)},children:t.groups.delete_button})]}):e.jsx(D,{size:"xs",color:"cyan",variant:"light",onClick:()=>{a(n)},children:t.groups.join_group})})]})})]},n.identifier))})})]}):e.jsx(_e,{})})};export{qe as default};
