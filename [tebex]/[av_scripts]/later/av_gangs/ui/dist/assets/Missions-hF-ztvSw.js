import{R as _,L as C,G as I,c as w,r,K as E,j as t,B as p,W as M,I as h,a as j,X as b,T as u,A as R,F as $,H as v}from"./index-DWxocKBz.js";import{C as y}from"./Card-BQI7fH89.js";import{R as k}from"./Rating-qUMAm4sC.js";const z="_grid_19ndu_1",G="_blur_19ndu_15",F="_card_19ndu_31",D="_image_19ndu_43",T="_description_19ndu_53",q="_title_19ndu_63",A="_buttonBox_19ndu_77",H="_button_19ndu_77",s={grid:z,blur:G,card:F,image:D,description:T,title:q,buttonBox:A,button:H},W=()=>{const o=_(C),g=_(I),a=w(g.level,g.max),[l,m]=r.useState([]),[x,L]=r.useState(!1),[f,S]=r.useState(0);E("updateMission",e=>{if(e.name){const c=e.name,i=e.started;m(d=>d.map(n=>n.name===c?{...n,started:i}:n))}});const N=e=>{v("av_gangs","startMission",e)};r.useEffect(()=>{(async()=>{const c=await v("av_gangs","getMissions");if(c){const i=c.sort((d,n)=>d.difficulty-n.difficulty);m(i)}})()},[]),r.useEffect(()=>{l.length>0&&f===l.length&&L(!0)},[f,l.length]);const B=()=>{S(e=>e+1)};return t.jsxs(t.Fragment,{children:[!x&&t.jsx(p,{style:{position:"relative",height:"90%",width:"100%"},children:t.jsx(M,{})}),l.map(e=>t.jsx(h,{src:e.image,style:{display:"none"},onLoad:B,fallbackSrc:"missions/missing.png"},e.name)),x&&t.jsx(j,{className:s.grid,gutter:"xs",children:l.map(e=>t.jsx(j.Col,{span:4,children:t.jsxs(y,{withBorder:!0,radius:"md",className:s.card,children:[t.jsxs(y.Section,{className:s.image,children:[a.level<e.level&&t.jsx(p,{className:s.blur}),t.jsx(h,{src:e.image,fallbackSrc:"missions/missing.png"})]}),t.jsx(k,{value:e.difficulty,fractions:2,readOnly:!0,emptySymbol:t.jsx(b,{size:"1rem",color:"gray"}),fullSymbol:t.jsx(b,{size:"1rem",color:"rgb(255,105,105)"}),mt:"xs"}),t.jsx(u,{className:s.title,fw:500,truncate:!0,children:a.level>=e.level?e.label:"Classified"}),t.jsx(u,{className:s.description,fz:"sm",c:"dimmed",lineClamp:4,mt:2,children:a.level>=e.level?e.description:`${o.requiredLevel} ${e.level}`}),t.jsxs(R,{className:s.buttonBox,mt:"xs",children:[a.level>=e.level&&e.price&&t.jsx(t.Fragment,{children:t.jsx(u,{fw:500,c:"gray.5",children:`${o.price}: $${e.price.toLocaleString("en-US")}`})}),t.jsx($,{className:s.button,color:"teal",size:"xs",variant:"subtle",disabled:a.level<e.level||e.started,onClick:()=>{N(e)},children:o.missions.start})]})]})},e.name))})]})};export{W as default};
