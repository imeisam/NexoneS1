import{c as M,R as _,L as k,j as s,l as C,r as f,G as x,e as A,a as b,f as d,B as v,b as l,A as y,g as p,C as m,h as G,m as S,i as N,d as z,S as T,k as F,F as L}from"./index-CQANsBws.js";import{T as B,a as O,D as W,b as P}from"./labData-ChQG5EtS.js";/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $=M("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E=M("outline","gps","IconGps",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 17l-1 -4l-4 -1l9 -4z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=M("outline","map-pin-share","IconMapPinShare",[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M12.02 21.485a1.996 1.996 0 0 1 -1.433 -.585l-4.244 -4.243a8 8 0 1 1 13.403 -3.651",key:"svg-1"}],["path",{d:"M16 22l5 -5",key:"svg-2"}],["path",{d:"M21 21.5v-4.5h-4.5",key:"svg-3"}]]);const H="_container_1ilsr_1",U="_box_1ilsr_19",V="_divider_1ilsr_55",Y="_tab_1ilsr_75",q="_input_1ilsr_85",J="_card_1ilsr_103",Q="_scroll_1ilsr_113",o={container:H,box:U,divider:V,tab:Y,input:q,card:J,scroll:Q},X=({type:e,setType:r})=>{const{admin:a}=_(k);return s.jsx(C,{classNames:o,defaultValue:"tables",value:e,onChange:c=>{c&&r(c)},allowTabDeactivation:!1,children:s.jsxs(C.List,{children:[s.jsx(C.Tab,{value:"tables",children:a.tables_tab}),s.jsx(C.Tab,{value:"labs",children:a.labs_tab}),s.jsx(C.Tab,{value:"players",children:a.players_tab}),s.jsx(C.Tab,{value:"zones",children:a.zones_tab})]})})},I=({name:e,type:r,event:a,cb:c})=>{const{admin:i}=_(k),[t,h]=f.useState(""),u=async n=>{const w=await d("av_drugs",a,{closest:n,identifier:t,type:r});c(w)};return s.jsxs(x,{gap:"xs",children:[s.jsx(A,{classNames:o,value:t,placeholder:`${i.search} ${e} ${i.by_identifier}`,size:"xs",onChange:n=>{h(n.target.value)}}),s.jsx(b,{size:"xs",onClick:()=>{u(!1)},children:i.search_button}),s.jsx(b,{size:"xs",color:"violet",onClick:()=>{u(!0)},children:`${i.closest} ${e}`})]})},R=e=>{const[r,a]=f.useState("");return f.useEffect(()=>{if(e){const c=new Date(e*1e3),i=String(c.getMonth()+1).padStart(2,"0"),t=String(c.getDate()).padStart(2,"0"),h=c.getFullYear(),u=String(c.getHours()).padStart(2,"0"),n=String(c.getMinutes()).padStart(2,"0"),w=`${i}/${t}/${h} ${u}:${n}`;a(w)}},[e]),r},K=({table:e,handleDelete:r})=>{const{admin:a}=_(k),[c,i]=f.useState(""),t={width:"14px",height:"14px"};return s.jsxs(v,{p:"sm",mt:"xs",style:{border:"solid 1.25px rgba(255,255,255,0.1)",borderRadius:"4px"},children:[s.jsxs(x,{children:[s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"sm",fw:600,children:`${e.identifier}`}),s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",e.identifier)},children:s.jsx($,{style:t})})]}),s.jsx(b,{size:"xs",color:"blue.2",variant:"subtle",onClick:()=>{d("av_drugs","setGPS",{x:e.position.x,y:e.position.y})},children:a.set_gps}),s.jsxs(x,{ml:"auto",children:[s.jsx(A,{classNames:o,placeholder:"2+2=?",size:"xs",onChange:h=>{i(h.target.value)}}),s.jsx(b,{size:"xs",color:"red.9",disabled:c!=="4",onClick:()=>{r(e.identifier)},children:a.delete_button})]})]}),s.jsxs(p,{mt:"xs",grow:!0,children:[s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"sm",fw:600,children:a.owner}),s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",e.owner)},children:s.jsx($,{style:t})})]}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},children:e.owner})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.last_cook}),s.jsx(l,{fz:"xs",c:"gray.6",children:G(e.lastCook,e.now)})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.table_type}),s.jsx(l,{fz:"xs",c:"gray.6",children:e.itemName})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.highest_purity}),s.jsx(l,{fz:"xs",c:"gray.6",children:e.highestPurity?`${e.highestPurity}%`:"N/A"})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.placed}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},children:R(e.placed)})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.exact_coords}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},onDoubleClick:()=>{d("av_drugs","tp",e.position)},children:`x:${Math.floor(e.position.x)}, y: ${Math.floor(e.position.y)}, z: ${Math.floor(e.position.z)}`})]})})]})]})},ss=()=>{_(k);const[e,r]=f.useState(S()?B:[]),a=i=>{i&&r(i)},c=async i=>{if(await d("av_drugs","deleteTable",i)){const h=e.filter(u=>u.identifier!==i);r(h)}};return s.jsxs(v,{p:"sm",children:[s.jsx(I,{name:"table",type:"tables",event:"getInfo",cb:a}),s.jsx(N,{className:o.scroll,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mr:"sm",children:e.map(i=>s.jsx(K,{table:i,handleDelete:c},i.identifier))})]})},es=({lab:e,handleDelete:r})=>{const{admin:a}=_(k),[c,i]=f.useState(""),t={width:"14px",height:"14px"};return s.jsxs(v,{p:"sm",mt:"xs",style:{border:"solid 1.25px rgba(255,255,255,0.1)",borderRadius:"4px"},children:[s.jsxs(x,{children:[s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"sm",fw:600,children:`${e.identifier}`}),s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",e.identifier)},children:s.jsx($,{style:t})})]}),s.jsx(b,{size:"xs",color:"blue.2",variant:"subtle",onClick:()=>{d("av_drugs","setGPS",{x:e.coords.x,y:e.coords.y})},children:a.set_gps}),s.jsxs(x,{ml:"auto",children:[s.jsx(A,{classNames:o,placeholder:"2+2=?",size:"xs",onChange:h=>{i(h.target.value)}}),s.jsx(b,{size:"xs",color:"red.9",disabled:c!=="4",onClick:()=>{r(e.identifier)},children:a.delete_button})]})]}),s.jsxs(p,{mt:"xs",grow:!0,children:[s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,onClick:()=>{d("av_drugs","copy",e.owner)},children:[s.jsx(l,{fz:"sm",fw:500,children:a.owner}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},children:e.owner})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.last_cook}),s.jsx(l,{fz:"xs",c:"gray.6",children:G(e.lastCook,e.now)})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.lab_type}),s.jsx(l,{fz:"xs",c:"gray.6",children:e.type})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.highest_purity}),s.jsx(l,{fz:"xs",c:"gray.6",children:e.highestPurity?`${e.highestPurity}%`:"N/A"})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.created}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},children:R(e.created)})]})}),s.jsx(p.Col,{span:3,children:s.jsxs(m,{className:o.card,children:[s.jsx(l,{fz:"sm",fw:500,children:a.exact_coords}),s.jsx(l,{fz:"xs",c:"gray.6",style:{cursor:"pointer"},onDoubleClick:()=>{d("av_drugs","tp",e.coords)},children:`x:${Math.floor(e.coords.x)}, y: ${Math.floor(e.coords.y)}, z: ${Math.floor(e.coords.z)}`})]})})]})]})},rs=()=>{const{admin:e}=_(k),[r,a]=f.useState(S()?O:[]),c=t=>{t&&a(t)},i=async t=>{if(await d("av_drugs","deleteLab",t)){const u=r.filter(n=>n.identifier!==t);a(u)}};return s.jsxs(v,{p:"sm",children:[s.jsx(I,{name:e.lab,type:"labs",event:"getInfo",cb:c}),s.jsx(N,{className:o.scroll,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mr:"sm",children:r.map(t=>s.jsx(es,{lab:t,handleDelete:i},t.identifier))})]})},as=()=>{const{admin:e}=_(k),[r,a]=f.useState(S()?W:{}),[c,i]=f.useState(""),t={width:"14px",height:"14px"},h=n=>{n&&a(n)},u=n=>{if(d("av_drugs","productWipe",{type:n,identifier:r.identifier}),n=="all"){a({});return}const w={...r,[n]:{}};a(w)};return s.jsxs(v,{p:"sm",children:[s.jsx(I,{name:e.player,type:"player",event:"getPlayer",cb:h}),r&&r.identifier&&s.jsxs(v,{p:"sm",mt:"xs",style:{border:"solid 1.25px rgba(255,255,255,0.1)",borderRadius:"4px"},children:[s.jsxs(x,{children:[s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"sm",fw:600,style:{cursor:"pointer"},children:`${r.identifier}`}),s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",r.identifier)},children:s.jsx($,{style:t})})]}),s.jsxs(x,{ml:"auto",children:[s.jsx(A,{classNames:o,placeholder:"2+2=?",size:"xs",onChange:n=>{i(n.target.value)}}),s.jsx(b,{size:"xs",color:"red.9",disabled:c!=="4",onClick:()=>{u("all")},children:e.wipe_player})]})]}),s.jsxs(p,{mt:"sm",children:[s.jsx(p.Col,{span:4,children:s.jsxs(m,{className:o.card,p:"xs",children:[s.jsxs(x,{children:[s.jsx(l,{fw:500,fz:"md",children:e.tables_tab}),s.jsx(z,{label:e.double_click,fz:"xs",color:"dark.4",children:s.jsx(b,{size:"xs",variant:"subtle",ml:"auto",color:"red",onDoubleClick:()=>{u("tables")},children:e.wipe_tables})})]}),s.jsx(N,{h:300,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mt:"sm",children:s.jsx(T,{children:(r==null?void 0:r.tables)&&Object.keys(r.tables).map(n=>s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"xs",children:n}),s.jsx(z,{label:e.copy,fz:"xs",color:"dark.4",children:s.jsx(y,{ml:"auto",size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",n)},children:s.jsx($,{style:t})})}),s.jsx(z,{label:e.waypoint,fz:"xs",color:"dark.4",children:s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","productAction",{type:"table",identifier:n,action:"waypoint"})},children:s.jsx(E,{style:t})})}),s.jsx(z,{label:e.teleport,fz:"xs",color:"dark.4",children:s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","productAction",{type:"table",identifier:n,action:"teleport"})},children:s.jsx(Z,{style:t})})})]},n))})})]})}),s.jsx(p.Col,{span:4,children:s.jsxs(m,{className:o.card,p:"xs",children:[s.jsxs(x,{children:[s.jsx(l,{fw:500,fz:"md",children:e.labs_tab}),s.jsx(z,{label:e.double_click,fz:"xs",color:"dark.4",children:s.jsx(b,{size:"xs",variant:"subtle",ml:"auto",color:"red",onDoubleClick:()=>{u("labs")},children:e.wipe_labs})})]}),s.jsx(N,{h:300,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mt:"sm",children:s.jsx(T,{children:(r==null?void 0:r.labs)&&Object.keys(r.labs).map(n=>s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"xs",children:n}),s.jsx(z,{label:e.copy,fz:"xs",color:"dark.4",children:s.jsx(y,{ml:"auto",size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","copy",n)},children:s.jsx($,{style:t})})}),s.jsx(z,{label:e.waypoint,fz:"xs",color:"dark.4",children:s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","productAction",{type:"lab",identifier:n,action:"waypoint"})},children:s.jsx(E,{style:t})})}),s.jsx(z,{label:e.teleport,fz:"xs",color:"dark.4",children:s.jsx(y,{size:"xs",variant:"transparent",onClick:()=>{d("av_drugs","productAction",{type:"lab",identifier:n,action:"teleport"})},children:s.jsx(Z,{style:t})})})]},n))})})]})}),s.jsx(p.Col,{span:4,children:s.jsxs(m,{className:o.card,p:"xs",children:[s.jsxs(x,{children:[s.jsx(l,{fw:500,fz:"md",children:e.drugsxp}),s.jsx(z,{label:e.double_click,fz:"xs",color:"dark.4",children:s.jsx(b,{size:"xs",variant:"subtle",ml:"auto",color:"red",onDoubleClick:()=>{u("drugs")},children:e.wipe_drugs})})]}),s.jsx(N,{h:300,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mt:"sm",children:s.jsx(T,{children:(r==null?void 0:r.drugs)&&Object.keys(r.drugs).map(n=>s.jsxs(x,{gap:"xs",children:[s.jsx(l,{fz:"xs",fw:500,children:`${r.drugs[n].label}:`}),s.jsx(l,{fz:"xs",children:`xp: ${r.drugs[n].xp?r.drugs[n].xp:0}, ${e.sold}: ${r.drugs[n].sold?r.drugs[n].sold:0}, ${e.income}: $${r.drugs[n].income?r.drugs[n].income:0}`})]}))})})]})})]})]})]})},ls=()=>{const{admin:e}=_(k),[r,a]=f.useState(S()),[c,i]=f.useState(S()?P:[]),[t,h]=f.useState(S()?P:[]),u=j=>{if(j==""){h(c);return}const g=c.filter(D=>D.label.toLowerCase().includes(j.toLowerCase()));h(g)},n=j=>{d("av_drugs","wipeZone",j);const g=c.map(D=>D.name===j?{...D,drug:"N/A",strain:"N/A"}:D);i(g),h(g)},w=()=>{d("av_drugs","wipeAll");const j=c.map(g=>({...g,drug:"N/A",strain:"N/A"}));i(j),h(j)};return f.useEffect(()=>{(async()=>{const g=await d("av_drugs","getAdminZones");g&&(i(g),h(g)),setTimeout(()=>{a(!0)},100)})()},[]),r?s.jsxs(v,{p:"sm",children:[s.jsxs(x,{children:[s.jsx(A,{classNames:o,placeholder:e.search_placeholder,onChange:j=>{u(j.target.value)},size:"xs",w:255}),s.jsx(b,{ml:"auto",size:"xs",color:"red",onDoubleClick:()=>{w()},children:e.reset_all})]}),s.jsx(N,{h:"45vh",type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mt:"sm",children:s.jsx(T,{gap:"xs",children:t.map((j,g)=>s.jsxs(x,{bg:g%2==0?"rgba(80,80,80,0.25)":"transparent",p:"sm",children:[s.jsx(l,{w:150,truncate:!0,fz:"sm",fw:500,children:j.label}),s.jsxs(L,{direction:"column",ml:"auto",children:[s.jsx(l,{fz:"sm",children:j.drug}),s.jsx(l,{c:"dimmed",fz:"xs",children:e.popular_drug})]}),s.jsxs(L,{direction:"column",ml:"auto",children:[s.jsx(l,{fz:"sm",children:j.strain}),s.jsx(l,{c:"dimmed",fz:"xs",children:e.popular_strain})]}),s.jsx(b,{ml:"auto",variant:"subtle",size:"xs",color:"red",onDoubleClick:()=>{n(j.name)},children:e.reset_zone})]},j.name))})})]}):s.jsx(F,{})},cs=()=>{const[e,r]=f.useState("tables"),a=c=>{switch(c.code){case"Escape":d("av_drugs","closeAdmin");break}};return f.useEffect(()=>{window.addEventListener("keydown",a)},[]),s.jsx(v,{className:o.container,children:s.jsxs(v,{className:o.box,children:[s.jsx(X,{type:e,setType:r}),e=="tables"&&s.jsx(ss,{}),e=="labs"&&s.jsx(rs,{}),e=="players"&&s.jsx(as,{}),e=="zones"&&s.jsx(ls,{})]})})};export{cs as default};
