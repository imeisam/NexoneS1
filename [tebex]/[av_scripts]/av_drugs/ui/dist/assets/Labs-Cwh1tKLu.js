import{c as g,R as M,L as C,j as s,G as o,B as y,T as U,a as f,f as u,r as m,b as r,d as E,A as L,e as K,S as N,g as k,C as w,h as P,i as D,F as I,k as A}from"./index-CQANsBws.js";import{L as O}from"./labData-ChQG5EtS.js";/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G=g("outline","arrow-up-right","IconArrowUpRight",[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M8 7l9 0l0 9",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H=g("outline","bolt","IconBolt",[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W=g("outline","id-badge-2","IconIdBadge2",[["path",{d:"M7 12h3v4h-3z",key:"svg-0"}],["path",{d:"M10 6h-6a1 1 0 0 0 -1 1v12a1 1 0 0 0 1 1h16a1 1 0 0 0 1 -1v-12a1 1 0 0 0 -1 -1h-6",key:"svg-1"}],["path",{d:"M10 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v3a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 16h2",key:"svg-3"}],["path",{d:"M14 12h4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q=g("outline","key-off","IconKeyOff",[["path",{d:"M10.17 6.159l2.316 -2.316a2.877 2.877 0 0 1 4.069 0l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.33 2.33",key:"svg-0"}],["path",{d:"M14.931 14.948a2.863 2.863 0 0 1 -1.486 -.79l-.301 -.302l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.863 2.863 0 0 1 -.794 -1.504",key:"svg-1"}],["path",{d:"M15 9h.01",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J=g("outline","lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q=g("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V=g("outline","test-pipe","IconTestPipe",[["path",{d:"M20 8.04l-12.122 12.124a2.857 2.857 0 1 1 -4.041 -4.04l12.122 -12.124",key:"svg-0"}],["path",{d:"M7 13h8",key:"svg-1"}],["path",{d:"M19 15l1.5 1.6a2 2 0 1 1 -3 0l1.5 -1.6z",key:"svg-2"}],["path",{d:"M15 3l6 6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X=g("outline","transfer","IconTransfer",[["path",{d:"M20 10h-16l5.5 -6",key:"svg-0"}],["path",{d:"M4 14h16l-5.5 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=g("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=g("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.7.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ss=g("filled","flask-2-filled","IconFlask2Filled",[["path",{d:"M15 2a1 1 0 0 1 0 2v5.674l.062 .03a7 7 0 0 1 3.85 5.174l.037 .262a7 7 0 0 1 -3.078 6.693a1 1 0 0 1 -.553 .167h-6.635a1 1 0 0 1 -.552 -.166a7 7 0 0 1 .807 -12.134l.062 -.028v-5.672a1 1 0 1 1 0 -2h6zm-2 2h-2v6.34a1 1 0 0 1 -.551 .894l-.116 .049a5 5 0 0 0 -2.92 2.717h9.172a5 5 0 0 0 -2.918 -2.715a1 1 0 0 1 -.667 -.943v-6.342z",key:"svg-0"}]]);const es="_container_1jj67_1",as="_box_1jj67_19",ts="_transfer_1jj67_55",rs="_transferBox_1jj67_79",ns="_divider_1jj67_103",ls="_keys_1jj67_123",cs="_iconBox_1jj67_135",is="_input_1jj67_157",os="_card_1jj67_175",ds="_scroll_1jj67_185",c={container:es,box:as,transfer:ts,transferBox:rs,divider:ns,keys:ls,iconBox:cs,input:is,card:os,scroll:ds},hs=({identifier:t,status:l=!0,toggleLab:h,isOwner:x,canTransfer:e,canDelete:_,isCop:a,setNotification:j})=>{const{labs:i}=M(C),b=n=>{u("av_drugs","seizeLab",n)};return s.jsxs(s.Fragment,{children:[s.jsxs(o,{p:"sm",children:[s.jsxs(o,{gap:"xs",children:[s.jsx(y,{className:c.iconBox,children:s.jsx(V,{style:{width:"20px",height:"20px"},color:"#a5d8ff"})}),s.jsx(U,{order:2,fw:600,c:"blue.2",children:i.header})]}),s.jsxs(o,{ml:"auto",gap:"sm",children:[s.jsx(f,{style:{cursor:"pointer"},variant:"light",color:"gray",c:l?"blue.2":"gray",size:"xs",leftSection:s.jsx(H,{stroke:1.5,style:{width:"16px",height:"16px"}}),onClick:()=>{h()},children:l?i.lab_on:i.lab_off}),s.jsx(f,{style:{cursor:"pointer"},variant:"light",color:"gray",size:"xs",leftSection:s.jsx(W,{stroke:1.5,style:{width:"16px",height:"16px"}}),onClick:()=>{u("av_drugs","copy",t)},children:i.lab_id}),x&&e?s.jsx(f,{style:{cursor:"pointer"},variant:"light",color:"gray",size:"xs",leftSection:s.jsx(X,{stroke:1.5,style:{width:"16px",height:"16px"}}),onClick:()=>{j(i.transfer,i.transfer_description,"transferLab")},children:i.transfer}):null,x&&_?s.jsx(f,{style:{cursor:"pointer"},variant:"light",color:"red",size:"xs",leftSection:s.jsx(Y,{stroke:1.5,style:{width:"16px",height:"16px"}}),onClick:()=>{j(i.delete,i.delete_description,"deleteLab")},children:i.delete}):null,a&&s.jsx(f,{style:{cursor:"pointer"},variant:"light",color:"gray",size:"xs",leftSection:s.jsx(J,{stroke:1.5,style:{width:"16px",height:"16px"}}),onClick:()=>{b(t)},children:i.seize})]})]}),s.jsx(y,{className:c.divider})]})},xs=({identifier:t,holders:l,setHolders:h,isOwner:x})=>{const{labs:e}=M(C),[_,a]=m.useState(l),j=n=>{if(n==""){a(l);return}const v=l.filter(z=>z.name.toLowerCase().includes(n.toLowerCase()));a(v)},i=n=>{const v=l.filter(z=>z.identifier!==n);a(v),h(v),u("av_drugs","removeKeys",{lab:t,player:n})},b=async()=>{const n=await u("av_drugs","giveKeys",t);n&&(a(n),h(n))};return s.jsxs(y,{p:"sm",style:{backgroundColor:"rgba(155,155,155,0.055)",borderRadius:"8px",boxShadow:"0px 0px 10px 1px rgba(0, 0, 0, 0.095)"},children:[s.jsxs(o,{children:[s.jsx(r,{fz:"lg",fw:500,children:e.keys}),x&&s.jsx(E,{label:e.give_keys,color:"dark.4",children:s.jsx(L,{ml:"auto",size:"md",variant:"transparent",color:"gray",c:"blue.2",onClick:b,children:s.jsx(Z,{style:{width:"14px",height:"14px"}})})})]}),s.jsx(K,{mt:"xs",classNames:c,placeholder:e.search,size:"xs",maw:"100%",onChange:n=>{j(n.target.value)}}),_[0]?s.jsx(N,{className:c.keys,mt:"sm",gap:0,children:_.map((n,v)=>s.jsxs(o,{bg:v%2==0?"rgba(80,80,80,0.25)":"transparent",p:"xs",style:{borderRadius:"4px"},children:[s.jsx(r,{truncate:!0,maw:125,c:"white",fz:"sm",children:n.name}),x&&s.jsx(L,{ml:"auto",size:"sm",variant:"subtle",color:"red",onClick:()=>{i(n.identifier)},children:s.jsx(q,{style:{width:"12px",height:"12px"}})})]},n.identifier))}):s.jsx(y,{className:c.keys,children:s.jsx(r,{mt:"sm",ta:"center",c:"dimmed",fz:"xs",children:e.no_holders})})]})},ps=({lab:t})=>{const{labs:l}=M(C),h={width:"20px",height:"20px",marginLeft:"auto",color:"#a5d8ff"};return s.jsxs(k,{mr:"sm",children:[s.jsx(k.Col,{span:4,children:s.jsxs(w,{className:c.card,children:[s.jsxs(o,{children:[s.jsx(r,{fz:"lg",fw:500,children:l.last_cook}),s.jsx(ss,{style:h,stroke:1.5})]}),s.jsx(r,{fz:"md",c:"gray.6",children:P(t.lastCook,t.now)})]})}),s.jsx(k.Col,{span:4,children:s.jsxs(w,{className:c.card,children:[s.jsxs(o,{children:[s.jsx(r,{fz:"lg",fw:500,truncate:!0,children:l.highest_purity}),s.jsx(Q,{style:h,stroke:1.5})]}),s.jsx(r,{fz:"md",c:"gray.6",children:`${t.highestPurity}%`})]})}),s.jsx(k.Col,{span:4,children:s.jsxs(w,{className:c.card,children:[s.jsxs(o,{children:[s.jsx(r,{fz:"lg",fw:500,children:l.lab_level}),s.jsx(G,{style:h,stroke:1.5})]}),s.jsx(r,{fz:"md",c:"gray.6",children:Math.floor(t.xp/100)})]})})]})},gs=({lab:t,upgrades:l,handlePayment:h,handleUpgrade:x})=>{const{labs:e}=M(C);return s.jsxs(s.Fragment,{children:[s.jsx(ps,{lab:t}),s.jsx(r,{mt:"md",mb:"xs",fz:"lg",fw:500,children:e.upgrades}),s.jsx(D,{className:c.scroll,type:"hover",scrollbars:"y",offsetScrollbars:!0,scrollbarSize:7,mr:"sm",children:s.jsxs(N,{gap:"xs",children:[t.isExpired&&s.jsx(w,{className:c.card,children:s.jsxs(o,{children:[s.jsxs(I,{direction:"column",children:[s.jsx(r,{fz:"lg",fw:500,children:e.maintenance}),s.jsx(r,{fz:"xs",c:"dimmed",children:e.maintenance_description})]}),s.jsxs(o,{ml:"auto",children:[s.jsx(r,{fz:"sm",fw:500,children:`${e.price}: $${l.maintenance.toLocaleString("en-US")}`}),s.jsx(f,{color:"blue.1",variant:"light",w:115,onClick:()=>{h()},children:e.renew})]})]})}),s.jsx(w,{className:c.card,children:s.jsxs(o,{children:[s.jsxs(I,{direction:"column",children:[s.jsx(r,{fz:"lg",fw:500,children:`${e.security} (${t.upgrades.security}/3)`}),s.jsx(r,{fz:"xs",c:"dimmed",children:e.security_description})]}),t.upgrades.security<3?s.jsxs(o,{ml:"auto",children:[s.jsx(r,{fz:"sm",fw:500,children:`${e.price}: $${l.security.toLocaleString("en-US")}`}),s.jsx(f,{color:"blue.1",variant:"light",w:115,disabled:t.upgrades.security>=3,onClick:()=>{x("security")},children:e.upgrade_button})]}):s.jsx(r,{ml:"auto",fw:500,fz:"sm",c:"blue.1",children:e.fully_upgraded})]})}),s.jsx(w,{className:c.card,children:s.jsxs(o,{children:[s.jsxs(I,{direction:"column",children:[s.jsx(r,{fz:"lg",fw:500,children:`${e.stash} (${t.upgrades.stash}/3)`}),s.jsx(r,{fz:"xs",c:"dimmed",children:e.stash_description})]}),t.upgrades.stash<3?s.jsxs(o,{ml:"auto",children:[s.jsx(r,{fz:"sm",fw:500,children:`${e.price}: $${l.stash.toLocaleString("en-US")}`}),s.jsx(f,{color:"blue.1",variant:"light",w:115,disabled:t.upgrades.stash>=3,onClick:()=>{x("stash")},children:e.upgrade_button})]}):s.jsx(r,{ml:"auto",fw:500,fz:"sm",c:"blue.1",children:e.fully_upgraded})]})})]})})]})},fs=({identifier:t})=>{const{labs:l}=M(C),[h,x]=m.useState(!1),[e,_]=m.useState({title:"",description:"",event:""}),[a,j]=m.useState(O),[i,b]=m.useState({maintenance:1e3,security:1e3,stash:1e3}),[n,v]=m.useState(!1),z=p=>{const d={...a,keys:p};j(d)},B=async()=>{const p=await u("av_drugs","toggleLab",a.identifier),d={...a,canCook:p};j(d)},T=async()=>{const p=await u("av_drugs","payMaintenance",a.identifier),d={...a,isExpired:p};j(d)},$=async p=>{const d=await u("av_drugs","buyUpgrade",{identifier:a.identifier,type:p});if(d){const S={...a,upgrades:d};j(S)}},F=(p,d,S)=>{_({title:p,description:d,event:S}),x(!0)},R=p=>{switch(p.code){case"Escape":u("av_drugs","close");break}};return m.useEffect(()=>{(async()=>{const d=await u("av_drugs","getLab",t);d&&(j(d.lab),b(d.upgrades)),setTimeout(()=>{v(!0)},100)})()},[t]),m.useEffect(()=>{window.addEventListener("keydown",R)},[]),s.jsx(y,{className:c.container,children:s.jsx(y,{className:c.box,children:n?s.jsxs(s.Fragment,{children:[h&&s.jsx(y,{className:c.transfer,children:s.jsxs(y,{className:c.transferBox,children:[s.jsx(r,{fw:700,ta:"center",fz:"lg",children:e.title}),s.jsx(y,{className:c.divider}),s.jsx(r,{fz:"sm",c:"gray.5",mt:"xs",children:e.description}),s.jsxs(o,{mt:"sm",children:[s.jsx(f,{ml:"auto",variant:"transparent",color:"red",size:"sm",onClick:()=>{x(!1)},children:l.cancel}),s.jsx(f,{variant:"light",size:"sm",onClick:()=>{x(!1),u("av_drugs",e.event,a.identifier)},children:l.confirm})]})]})}),s.jsx(hs,{identifier:t,toggleLab:B,status:a.canCook,isOwner:a.isOwner,canTransfer:a.canTransfer,canDelete:a.canDelete,isCop:a.isCop,setNotification:F}),s.jsxs(k,{children:[s.jsx(k.Col,{span:3,p:"lg",children:s.jsx(xs,{holders:a.keys,setHolders:z,isOwner:a.isOwner,identifier:a.identifier})}),s.jsx(k.Col,{span:9,pt:"lg",children:s.jsx(gs,{lab:a,upgrades:i,handlePayment:T,handleUpgrade:$})})]})]}):s.jsx(A,{})})})};export{fs as default};
